name: Post on Change

on:
  push:
    paths:
      - 'input/**'

jobs:
  create_queues:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.x

      - name: Install dependencies
        run: pip install datetime json logging requests time pandas pathlib pprint shutil urllib yaml zipfile 

      - name: Run bash Script on File Change
        run: |
          if [ "${{ github.event_name }}" == "push" ]; then
            for file in $(git diff --name-only ${{ github.sha }}^ ${{ github.sha }}); do
              if [[ $file == input/* ]]; then
                scripts/create-queues.sh $file
              fi
            done
          fi

#      - name: Run Python script
#        run: |
#          # Your script to detect changes and perform REST POST request
#          python semp_post.py
#        env:
#          POST_URL: ${{ secrets.POST_URL }}
